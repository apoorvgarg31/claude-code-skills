---
description: Interactive setup to configure which agents handle each phase
argument-hint: 
allowed-tools: Read, Write, Edit, Bash, AskUserQuestion
---

# Orchestra Setup (Interactive)

Guide the user through configuring their multi-agent workflow.

## Introduction

Say:
```
ğŸ¼ **Orchestra Setup**

I'll help you configure which AI agents handle each phase of your development workflow.

**Orchestrator:** Opus (Claude Code) â€” always manages the workflow

**Available agents:**
- `codex` â€” OpenAI Codex CLI (fast coding)
- `claude` â€” Claude Code (thorough analysis)
- `gemini` â€” Gemini CLI (Google's AI)
- `aider` â€” Aider (git-integrated coding)
- `droid` â€” Droid CLI (autonomous coding)
- `opus` â€” Handle directly in this session

Let's configure each phase:
```

## Ask Questions

Use AskUserQuestion for each phase:

### 1. Developer Phase
```
Which agent should handle **Development** (implementing features)?

Options: codex, claude, gemini, aider, droid, opus
Default: codex

Your choice:
```

### 2. Code Review Phase
```
Which agent should handle **Code Review**?

Options: codex, claude, gemini, aider, droid, opus
Default: claude

Your choice:
```

### 3. Test Phase
```
Which agent should handle **Testing**?

Options: codex, claude, gemini, aider, droid, opus
Default: opus

Your choice:
```

### 4. DevOps Phase
```
Which agent should handle **DevOps** (deployment)?

Options: codex, claude, gemini, aider, droid, opus
Default: opus

Your choice:
```

## Ask for Project Name

```
What's your project name? (e.g., todo-api, my-app)
```

This will be used as the folder name under `state/`.

## Save Configuration

Create project directory:
```bash
mkdir -p state/<project-name>
```

Write `./state/<project-name>/config.yaml`:
```yaml
# Orchestra Configuration
# Generated by /orchestra:init

orchestrator: opus  # Always Claude Code

agents:
  business-analyst: opus      # Always opus (requirements need intelligence)
  developer: <user_choice>    # From question 1
  code-review: <user_choice>  # From question 2
  test: <user_choice>         # From question 3
  devops: <user_choice>       # From question 4

terminal:
  type: tmux
  session_prefix: orchestra

# Agent commands reference:
# codex:  codex --yolo '<prompt>'
# claude: claude '<prompt>'
# gemini: gemini '<prompt>'
# aider:  aider --message '<prompt>'
# droid:  droid '<prompt>'
# opus:   (handled directly in this session)
```

## Confirmation

Show the user their configuration:
```
âœ… **Configuration saved!**

Your workflow:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Phase           â”‚ Agent   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Business Analystâ”‚ opus    â”‚
â”‚ Developer       â”‚ <choice>â”‚
â”‚ Code Review     â”‚ <choice>â”‚
â”‚ Test            â”‚ <choice>â”‚
â”‚ DevOps          â”‚ <choice>â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Config saved to: ./state/config.yaml

**Next step:** Run `/orchestra:start <your project description>`
```

## Notes

- If user enters invalid agent, ask again
- If user just presses enter, use the default
- Business Analyst is ALWAYS opus (not configurable)
- Config can be re-run to change settings
